<!--Hub for the profile page-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="transaction-module.css">
    <link rel="stylesheet" href="overview-charts.css">
    <link rel="stylesheet" href="pyf_style.css">
    <link rel="stylesheet" href="fifty_thirty_twenty_style.css">
    <link rel="stylesheet" href="zero_based_budget.css">
    <script src="https://kit.fontawesome.com/9e304416f8.js" crossorigin="anonymous"></script>
    <title>Budget Tracker: Profile</title>

</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button class="toggle" id="toggle"><i class="fa-solid fa-bars"></i></button>
        <a href="#overview" id="overview_button">
            <i class="fas fa-sitemap icon"></i><span> Overview</span></a>
        <a href="#budgetplans" id="budget_button">
            <i class="fas fa-piggy-bank icon"></i><span> Budget Plans</span></a>
        <a href="#transactions" id="transactions_button">
            <i class="fa-solid fa-list icon"></i><span> Transactions</span></a>
        <a onclick="location.href='transaction.html'">
            <i class="fa-solid fa-plus icon"></i><span> Add Transaction</span></a>
        <a class="sidebar_bottom" onclick="location.href='main.html'">
            <i class="fa-solid fa-house icon"></i><span> Home</span></a>
        <a onclick="location.href='profile_page.html'">
            <i class="fas fa-user-circle icon"></i><span> Profile</span></a>
    </div>

    
    <!-- Content Area (Overview Section - Visible on Default)-->
    <div class="content" id="overview_section">
        <h1><span id="user_txt">Hello User!</span></h1>
        <p>Track your financial overview</p>
        
        <!-- Dashboard Stats -->
        <div class="dashboard-grid">
            <div class="stat-card">
                <div class="stat-label">Total Balance</div>
                <div class="stat-value" id="totalBalance">$0.00</div>
                <div class="stat-change positive">
                    <span>ðŸ’°</span> Net Balance
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Income</div>
                <div class="stat-value income" id="totalIncome">$0.00</div>
                <div class="stat-change positive">
                    <span>â†‘</span> Income
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Expenses</div>
                <div class="stat-value expense" id="totalExpenses">$0.00</div>
                <div class="stat-change negative">
                    <span>â†“</span> <span id="transactionCount">0</span> transactions
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Top Category</div>
                <div class="stat-value" id="topCategory" style="font-size: 20px;">â€”</div>
                <div class="stat-change">
                    <span id="topCategoryAmount">$0.00</span>
                </div>
            </div>
        </div>
        
        <!-- Main Grid for Chart and Recent Transactions -->
        <div class="overview-main-grid">
            <!-- Chart Section -->
            <div class="overview-card">
                <div class="card-header">
                    <h2 class="card-title">Spending Overview</h2>
                    <div class="chart-selector">
                        <button class="chart-btn active" onclick="changeChartType('pie')">Pie</button>
                        <button class="chart-btn" onclick="changeChartType('bar')">Bar</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="expenseChart"></canvas>
                </div>
            </div>
            
            <!-- Recent Transactions -->
            <div class="overview-card">
                <div class="card-header">
                    <h2 class="card-title">Recent Transactions</h2>
                </div>
                <div class="recent-transactions-list" id="recentTransactionsList">
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ“Š</div>
                        <div class="empty-state-text">No transactions yet. Start tracking your finances!</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Budget Section (Hidden by Default)-->
    <div class="hidden content" id="budget_section"> 
        <!-- Form will show only if the user hasn't selected a plan yet -->
        <h1>Budget Plans</h1>
        <form id="plan_form">
            <h2 class="center">Select the budget plan that fits your needs</h2>
            
            <div class="center">
                <label for="plan_type"><b>Select your budget plan:</b></label>
                <select id="plan_select" name="plans" required>
                    <option value="">--- Select Plan ---</option>
                    <option value="50/30/20">50/30/20</option>
                    <option value="zero-based">Zero-Based</option>
                    <option value="pay-yourself-first">Pay Yourself First</option>
                </select>
                <br><br>
                <div class="center">
                    <label for="income"><b>Enter your monthly income:</b></label>
                    <input id="monthly_income" type="number" min="1" required>
                    <br><br>
                </div>

                <!-- Additional forms for zero-based/pay-yourself first will appear here-->
                <div id="extra_fields" class="extra_fields"></div>
                <button class="submit_button button_format center" type="submit" id="save_plan_button">Save Plan</button>
            </div>
            <br><br><br>


            <!-- Budget Plan Descriptions -->
            <h2>Learn what plan is right for you</h2>
            <div class="content_grid">
                <h3 class="center budget_font ">50/30/20 
                    <br><i class="fa-solid fa-chart-pie"></i></h3>
                <p class="budget_font">The 50/30/20 plan is the most popular budget plan.
                    50% of your net income goes to needs, your essential expenses.
                    30% of your net income goes to your wants, your non-essential expenses.
                    20% of your net income goes to your financial goals, Whether it is adding to 
                    your savings, paying off debts, or investing your money.
                </p>
                <h3 class="center budget_font">Zero-Based 
                    <br><i class="fas fa-balance-scale"></i></h3>
                <p class="budget_font">The Zero-Based budget plan is for those who want to know exactly where their
                    money is going. Every cent of your income is categorized into groups, such as 
                    groceries, clothes, savings, loan repayment, etc. It is the most detailed approach
                    to budgeting.
                </p>
                <h3 class="center budget_font">Pay-Yourself-First
                    <br><i class="fas fa-hand-holding-usd"></i></h3>
                <p class="budget_font">The Pay-Yourself-First method is the simplest approach to budgeting.
                    It prioritizes your savings before expenses. When you receive your monthly income, you set aside
                    a certain amount first. After you deposit into your savings, you pay for your essential,
                    non-negotiable expenses next, followed by non-essential ones.
                </p>
            </div>
        </form>

        <!--Popup Banners will appear here!-->
        <div id="popup_banner" class="popup_banner hidden">
            <p id="popup_txt" class="popup_txt"></p>
        </div>
        
        <!-- Will display if user has a saved plan -->
        <div id="plan_display" style="display:none">
            <div class="content_grid">
                <h3>Your Current Budget Plan: <span id="current_plan_txt"></span></h3>
                <button id="change_plan_button" class="change_button button_format">
                    <b>Change Plan</b> <i class="fa-solid fa-arrows-rotate icon"></i>
                </button>
            </div>
            <br><br>
            
            <!-- 50/30/20 Plan Display -->
            <div id="plan1" class="fifty-thirty-twenty-container">
                <div class="charts-section">
                    <!-- Pie Chart -->
                    <div class="chart-card">
                        <h3>Current Budget Breakdown</h3>
                        <div class="pie-chart-container">
                            <canvas id="budgetPieChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Stacked Bar Chart -->
                    <div class="chart-card">
                        <h3>Monthly Breakdown</h3>
                        <div class="stacked-chart-container">
                            <canvas id="weeklyStackedChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Bars -->
                <div class="progress-bars-section">
                    <h3>Budget Progress</h3>
                    
                    <!-- Needs Progress Bar -->
                    <div class="progress-bar-item">
                        <div class="progress-header">
                            <div class="progress-label">
                                Needs
                            </div>
                            <div class="progress-stats">
                                <span class="progress-percent" id="needsPercent">0%</span>
                                <span class="progress-amount" id="needsAmount">$0 of $0</span>
                                <span class="alert-text" id="needsAlert">Over Budget!</span>
                            </div>
                        </div>
                        <div class="progress-track" id="needsProgress">
                            <div class="progress-fill" id="needsProgressFill"></div>
                        </div>
                    </div>
                    
                    <!-- Wants Progress Bar -->
                    <div class="progress-bar-item">
                        <div class="progress-header">
                            <div class="progress-label">
                                Wants
                            </div>
                            <div class="progress-stats">
                                <span class="progress-percent" id="wantsPercent">0%</span>
                                <span class="progress-amount" id="wantsAmount">$0 of $0</span>
                                <span class="alert-text" id="wantsAlert">Over Budget!</span>
                            </div>
                        </div>
                        <div class="progress-track" id="wantsProgress">
                            <div class="progress-fill" id="wantsProgressFill"></div>
                        </div>
                    </div>
                    
                    <!-- Savings Progress Bar -->
                    <div class="progress-bar-item">
                        <div class="progress-header">
                            <div class="progress-label">
                                Savings
                            </div>
                            <div class="progress-stats">
                                <span class="progress-percent" id="savingsPercent">0%</span>
                                <span class="progress-amount" id="savingsAmount">$0 of $0</span>
                                <span class="alert-text" id="savingsAlert">Over Budget!</span>
                            </div>
                        </div>
                        <div class="progress-track" id="savingsProgress">
                            <div class="progress-fill" id="savingsProgressFill"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Zero-Based Plan Display -->
            <div id="plan2" class="zero-based-container">
                <!-- Header -->
                <div class="zero-based-header">
                    <div>
                        <h2>Zero-Based Budget Plan</h2>
                        <p class="subtitle">Every dollar has a purpose</p>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-grid">
                    <!-- Income vs Expenses Line Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Income vs. Expenses Over Time</h3>
                            <div class="time-period-selector">
                                <button class="period-btn" data-period="week">Week</button>
                                <button class="period-btn active" data-period="month">Month</button>
                                <button class="period-btn" data-period="year">Year</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="incomeVsExpensesChart"></canvas>
                        </div>
                    </div>

                    <!-- Category Breakdown Bar Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Category Breakdown</h3>
                            <div class="chart-type-toggle">
                                <button class="toggle-btn active" data-type="bar">Bar</button>
                                <button class="toggle-btn" data-type="pie">Pie</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="categoryBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Budget Summary Cards -->
                <div class="budget-summary-cards">
                    <div class="summary-card total-budget">
                        
                        <div class="card-content">
                            <div class="card-label">Total Budget</div>
                            <div class="card-value" id="totalBudgetValue">$0</div>
                        </div>
                    </div>
                    <div class="summary-card total-expenses">
                        
                        <div class="card-content">
                            <div class="card-label">Total Expenses</div>
                            <div class="card-value" id="totalExpensesValue">$0</div>
                        </div>
                    </div>
                    <div class="summary-card remaining">
                        
                        <div class="card-content">
                            <div class="card-label">Remaining</div>
                            <div class="card-value" id="remainingValue">$0</div>
                        </div>
                    </div>
                </div>

                <!-- Category Budget Table -->
                <div class="budget-table-container">
                    <div class="table-header">
                        <h3>Category Budget Tracker</h3>
                    </div>

                    <div class="table-wrapper">
                        <table class="budget-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Budget Goal</th>
                                    <th>Actual</th>
                                    <th>Difference</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="budgetTableBody">
                                <!-- Rows will be populated by JavaScript -->
                            </tbody>
                            <tfoot>
                                <tr class="totals-row">
                                    <td><strong>TOTALS</strong></td>
                                    <td><strong id="totalBudgetCell">$0.00</strong></td>
                                    <td><strong id="totalExpensesCell">$0.00</strong></td>
                                    <td><strong id="totalDifferenceCell">$0.00</strong></td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Pay Yourself First Section -->
            <div id="plan3" class="plan content_grid">
                <div class="savings-progress-section">
                    <h2>Your Savings Goal Progress</h2>
                    
                    <!-- Savings Progress Ring -->
                    <div class="progress-ring-container" id="progressRing">
                        <svg class="progress-ring" width="250" height="250">
                            <circle
                                stroke="#40444b"
                                stroke-width="20"
                                fill="transparent"
                                r="100"
                                cx="125"
                                cy="125"
                            />
                            <circle
                                class="progress-ring-circle"
                                id="progressCircle"
                                stroke="#43b581"
                                stroke-width="20"
                                fill="transparent"
                                r="100"
                                cx="125"
                                cy="125"
                                stroke-dasharray="628.32"
                                stroke-dashoffset="628.32"
                                stroke-linecap="round"
                            />
                        </svg>
                        <div class="progress-text"><p>Savings Goal<br>Progress</p></div>
                        <div class="tooltip" id="tooltip">0% Complete</div>
                    </div>
                    <div class="progress-info">
                        <p><strong>Monthly Goal:</strong> <span id="goal_display">$0</span></p>
                        <p><strong>Total Saved This Month:</strong> <span id="saved_display">$0.00</span></p>
                    </div>
                </div>
                <!-- Savings Growth Over Time Line Chart -->
                <div class="savings-chart-container">
                    <div class="chart-header">
                        <h2 class="chart-title">Savings Growth Over Time</h2>
                        <div class="time-toggle">
                            <button class="toggle-btn active" data-period="weekly">Weekly</button>
                            <button class="toggle-btn" data-period="monthly">Monthly</button>
                            <button class="toggle-btn" data-period="yearly">Yearly</button>
                        </div>
                    </div>
                    <div class="chart-canvas-wrapper">
                        <canvas id="savingsGrowthChart"></canvas>
                    </div>
                    <div class="stats-summary">
                        <div class="stat-box">
                            <div class="stat-label">Total Saved</div>
                            <div class="stat-value" id="totalSavedStat">$0.00</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Average per Period</div>
                            <div class="stat-value" id="avgPerPeriod">$0.00</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Growth Trend</div>
                            <div class="stat-value" id="growthTrend">--</div>
                        </div>
                    </div>
                </div>    
            </div>  <!--End of Plan 3: Pay Yourself First-->
        </div> <!-- End of Plan Displays -->

        <div id="plan_msg" class="message"></div> 

    </div> <!-- End of Budget Section -->

    <!-- Transactions Section (Hidden by Default)-->
    <div class="hidden content" id="transactions_section">
        <h2>My Transactions</h2>
        
        <div class="filters">
            <div class="filter-group">
                <label for="filterType">Type</label>
                <select id="filterType">
                    <option value="all">All Transactions</option>
                    <option value="income">Income Only</option>
                    <option value="expense">Expenses Only</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filterCategory">Category</label>
                <select id="filterCategory">
                    <option value="all">All Categories</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="sortBy">Sort By</label>
                <select id="sortBy">
                    <option value="date-desc">Date (Newest First)</option>
                    <option value="date-asc">Date (Oldest First)</option>
                    <option value="amount-desc">Amount (High to Low)</option>
                    <option value="amount-asc">Amount (Low to High)</option>
                </select>
            </div>
        </div>

        <div class="transactions-container">
            <div class="transaction-list" id="transactionList">
                <div class="loading">Loading transactions...</div>
            </div>
        </div>
    </div>

    <div class="hidden content" id="import">
        <h2>CSV import</h2>
        <a onclick="location.href='import.html'">
            <i class="fa-solid fa-file-import"></i><span> Import CSV</span>
        </a>
    </div>

    <!-- Chart.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <!-- existing scripts -->
    <script type="module" src="dashboard_script.js"></script>
    <script type="module" src="transactions-module.js"></script>
    <script type="module" src="budget_plan.js"></script>
    <script type="module" src="user_greeting.js"></script>
    <script type="module" src="overview-charts.js"></script>
    <script type="module" src="fifty_thirty_twenty.js"></script>
    <script type="module" src="pay_yourself_first.js"></script>
    <script type="module" src="zero_based_budget.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>